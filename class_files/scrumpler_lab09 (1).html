<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>
	Lab 09 - Dropbox Javascript API.
</title>
<link rel="stylesheet" type="text/css" href="./css/homework.css">
 <script src="https://www.dropbox.com/static/api/dropbox-datastores-1.0-latest.js"></script>
</head>
<body>
    <center>
        <button id="writeButton">Click to create <code>hello.txt</code> in Dropbox.</button>
    </center>
 
    <script>
        var client = new Dropbox.Client({ key: 'cwjpujgfs4hgavy' });
 
        function doHelloWorld() {
            client.writeFile('user.txt', JSON.stringify(userObject), function (error) {
                if (error) {
                    alert('Error: ' + error);
                } else {
                    alert('File written successfully!');
                }
            });
        }
 
        // Try to complete OAuth flow.
        client.authenticate({ interactive: false }, function (error, client) {
            if (error) {
                alert('Error: ' + error);
            }
        });
 
        if (client.isAuthenticated()) {
            doHelloWorld();
        }
 
        document.getElementById('objectUse').onclick = function () {
            client.authenticate(function (error, client) {
                if (error) {
                    alert('Error: ' + error);
                } else {
                    doHelloWorld();
                }
            });
        }
    </script>
</body>
</html>